# 📊 バージョン管理ルール（+0.01システム）

## 📌 基本原則
**修正を行うたびに必ず +0.01 バージョンを上げる**

これはAIによる開発において、すべての変更を追跡可能にするための重要なルールです。

---

## 🔢 バージョン番号体系

### 形式
```
v[メジャー].[マイナー].[パッチ]
例: v0.2.4
```

### 各桁の意味
- **メジャー (0)**: 大規模な変更、互換性のない変更
- **マイナー (2)**: 機能追加、大きな改善
- **パッチ (4)**: バグ修正、小さな改善（**+0.01ルール適用**）

---

## ✅ +0.01 バージョンアップが必要なケース

### 必須のケース
| 変更内容 | 例 | バージョンアップ |
|---------|-----|----------------|
| バグ修正 | ログインエラー修正 | v0.2.4 → v0.2.5 |
| UI調整 | ボタンの色変更 | v0.2.5 → v0.2.6 |
| 機能追加 | 優先度機能追加 | v0.2.6 → v0.2.7 |
| ドキュメント更新 | README更新 | v0.2.7 → v0.2.8 |
| リファクタリング | コード整理 | v0.2.8 → v0.2.9 |
| スタイル変更 | CSS調整 | v0.2.9 → v0.3.0 |

### パッチ番号のオーバーフロー処理
```
v0.2.99 → v0.3.0  # パッチが99を超えたらマイナーを上げる
v0.99.99 → v1.0.0  # マイナーが99を超えたらメジャーを上げる
```

---

## ❌ バージョンアップ不要なケース

| 変更内容 | 理由 |
|---------|------|
| コメントのみの追加 | 実行に影響なし |
| 開発中の一時的な変更 | コミット前の作業 |
| .gitignoreの更新 | プロジェクト動作に影響なし |
| ローカルテストファイル | 本体に影響なし |

---

## 📝 バージョン更新の具体的な手順

### 1. 現在のバージョンを確認
```bash
# README.mdの1行目を確認
grep "Universal App Template" README.md
# 出力例: # 🚀 Universal App Template v0.2.4
```

### 2. 更新が必要なファイル

#### 必須更新（3箇所）
```javascript
// 1. README.md（1行目）
# 🚀 Universal App Template v0.2.5 - クイックスタートガイド

// 2. README.md（バージョン情報セクション）
- **バージョン**: v0.2.5

// 3. README.md（更新履歴）
### v0.2.5 (2025-01-10)
- 変更内容を記載
```

#### package.jsonがある場合
```json
{
  "name": "universal-app-template",
  "version": "0.2.5",
  ...
}
```

### 3. 更新履歴の書き方

#### 形式
```markdown
### v0.2.5 (YYYY-MM-DD)
- 変更内容を簡潔に1行で
- 複数ある場合は箇条書き
- 技術的な詳細は不要
```

#### 良い例
```markdown
### v0.2.5 (2025-01-10)
- ログイン後のデータ表示問題を修正
- TODOアプリに優先度機能を追加
- モバイル表示のレスポンシブ対応
```

#### 悪い例
```markdown
### v0.2.5 (2025-01-10)
- バグ修正  # 具体性がない
- 更新しました  # 内容が不明
- src/services/database.jsの32行目でundefinedチェックを追加してnullポインタ例外を防ぐ処理を実装  # 詳細すぎる
```

---

## 🔄 並列開発時のバージョン競合処理

### 問題のシナリオ
```
AI-1: v0.2.4 → v0.2.5 に更新
AI-2: v0.2.4 → v0.2.5 に更新（競合！）
```

### 解決方法
1. **最新バージョンを確認**
```bash
git pull origin main
grep "Universal App Template" README.md
```

2. **適切なバージョンに調整**
```
AI-2: v0.2.5は既に使用済み → v0.2.6 に変更
```

3. **更新履歴も調整**
```markdown
### v0.2.5 (2025-01-10)
- AI-1の変更内容

### v0.2.6 (2025-01-10)
- AI-2の変更内容
```

---

## 🏷️ タグ付けルール

### Gitタグの作成
```bash
# バージョンアップ後、タグを作成
git tag v0.2.5
git push origin v0.2.5
```

### GitHub Releaseの作成
```markdown
## Release v0.2.5

### 変更内容
- ログイン問題修正
- パフォーマンス改善

### 使用したサブエージェント
- problem-sleuth-engineer
- Code Reviewer
```

---

## 📊 バージョン管理のベストプラクティス

### 1. こまめなバージョンアップ
```
良い: 1機能 = 1バージョンアップ
悪い: 10機能まとめて = 1バージョンアップ
```

### 2. 明確な変更記録
```markdown
良い: "TODOアプリに優先度でのソート機能を追加"
悪い: "機能追加"
```

### 3. サブエージェント使用の記録
```markdown
### v0.2.5 (2025-01-10) [softengineer-expert使用]
- カレンダー機能の実装
```

---

## 🚨 トラブルシューティング

### よくある問題と対処

| 問題 | 原因 | 対処法 |
|-----|------|--------|
| バージョン重複 | 並列作業 | 最新を確認して番号調整 |
| 更新漏れ | 3箇所の更新忘れ | チェックリスト使用 |
| package.json不一致 | 手動更新ミス | README.mdと同期 |

### バージョン更新チェックリスト
```markdown
- [ ] README.md 1行目更新
- [ ] README.md バージョン情報セクション更新
- [ ] README.md 更新履歴追加
- [ ] package.json更新（ある場合）
- [ ] git tag作成
- [ ] コミットメッセージに[type] v[version]形式使用
```

---

## 🎯 自動化スクリプト

### バージョンアップスクリプト例
```bash
#!/bin/bash
# update-version.sh

OLD_VERSION=$1
NEW_VERSION=$2

# README.md更新
sed -i "s/v${OLD_VERSION}/v${NEW_VERSION}/g" README.md

# package.json更新
sed -i "s/\"version\": \"${OLD_VERSION}\"/\"version\": \"${NEW_VERSION}\"/g" package.json

echo "Updated version from v${OLD_VERSION} to v${NEW_VERSION}"
```

### 使用方法
```bash
./update-version.sh 0.2.4 0.2.5
```

---

## 📚 関連ドキュメント

- [AI開発ルール](./AI_DEVELOPMENT_RULES.md)
- [サブエージェントガイド](./SUBAGENT_GUIDE.md)
- [GitHub公開ルール](./GITHUB_PUBLISH_GUIDE.md)

---

## まとめ

1. **すべての修正で +0.01**
2. **3箇所を必ず更新**（README.md×2、更新履歴）
3. **競合時は番号調整**
4. **明確な変更記録**
5. **タグとリリース作成**

**Remember**: このルールによって、AIによる開発の全履歴が追跡可能になります。